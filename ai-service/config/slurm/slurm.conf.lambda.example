# slurm.conf (Lambda cluster)
# Generated from live node introspection
# NOTE: Update SlurmctldHost/Addr if controller changes.

ClusterName=ringrift
SlurmctldHost=209-20-157-81
SlurmctldAddr=100.78.101.123
SlurmctldPort=6817
SlurmdPort=6818
AuthType=auth/munge
SlurmUser=slurm
SlurmdUser=root
StateSaveLocation=/var/spool/slurmctld
SlurmdSpoolDir=/var/spool/slurmd
SwitchType=switch/none
MpiDefault=none
ProctrackType=proctrack/linuxproc
TaskPlugin=task/affinity
SchedulerType=sched/backfill
SelectType=select/cons_tres
SelectTypeParameters=CR_Core
GresTypes=gpu
ReturnToService=2
SlurmctldTimeout=300
SlurmdTimeout=300
InactiveLimit=0
KillWait=30
MinJobAge=300

# Logging
SlurmctldLogFile=/var/log/slurm/slurmctld.log
SlurmdLogFile=/var/log/slurm/slurmd.log

# Node definitions
NodeName=DEFAULT Sockets=1 CoresPerSocket=1 ThreadsPerCore=1 State=UNKNOWN

NodeName=lambda-2xh100 NodeHostname=192-222-53-22 NodeAddr=100.97.104.89 CPUs=52 RealMemory=453277 Sockets=1 CoresPerSocket=26 ThreadsPerCore=2 Gres=gpu:h100:2 Feature=h100
NodeName=lambda-a10 NodeHostname=150-136-65-197 NodeAddr=100.91.25.13 CPUs=30 RealMemory=227493 Sockets=30 CoresPerSocket=1 ThreadsPerCore=1 Gres=gpu:a10:1 Feature=a10
NodeName=lambda-gh200-a NodeHostname=192-222-51-29 NodeAddr=100.123.183.70 CPUs=64 RealMemory=538294 Sockets=1 CoresPerSocket=64 ThreadsPerCore=1 Gres=gpu:gh200:1 Feature=gh200
NodeName=lambda-gh200-c NodeHostname=192-222-51-162 NodeAddr=100.88.35.19 CPUs=64 RealMemory=538294 Sockets=1 CoresPerSocket=64 ThreadsPerCore=1 Gres=gpu:gh200:1 Feature=gh200
NodeName=lambda-gh200-d NodeHostname=192-222-58-122 NodeAddr=100.75.84.47 CPUs=64 RealMemory=538294 Sockets=1 CoresPerSocket=64 ThreadsPerCore=1 Gres=gpu:gh200:1 Feature=gh200
NodeName=lambda-gh200-e NodeHostname=192-222-57-162 NodeAddr=100.88.176.74 CPUs=64 RealMemory=538294 Sockets=1 CoresPerSocket=64 ThreadsPerCore=1 Gres=gpu:gh200:1 Feature=gh200
NodeName=lambda-gh200-f NodeHostname=192-222-57-178 NodeAddr=100.104.165.116 CPUs=64 RealMemory=538294 Sockets=1 CoresPerSocket=64 ThreadsPerCore=1 Gres=gpu:gh200:1 Feature=gh200
NodeName=lambda-gh200-g NodeHostname=192-222-57-79 NodeAddr=100.104.126.58 CPUs=64 RealMemory=538294 Sockets=1 CoresPerSocket=64 ThreadsPerCore=1 Gres=gpu:gh200:1 Feature=gh200
NodeName=lambda-gh200-h NodeHostname=192-222-56-123 NodeAddr=100.65.88.62 CPUs=64 RealMemory=538294 Sockets=1 CoresPerSocket=64 ThreadsPerCore=1 Gres=gpu:gh200:1 Feature=gh200
NodeName=lambda-gh200-i NodeHostname=192-222-50-112 NodeAddr=100.99.27.56 CPUs=64 RealMemory=538294 Sockets=1 CoresPerSocket=64 ThreadsPerCore=1 Gres=gpu:gh200:1 Feature=gh200
NodeName=lambda-gh200-k NodeHostname=192-222-51-150 NodeAddr=100.96.142.42 CPUs=64 RealMemory=538294 Sockets=1 CoresPerSocket=64 ThreadsPerCore=1 Gres=gpu:gh200:1 Feature=gh200
NodeName=lambda-gh200-l NodeHostname=192-222-51-233 NodeAddr=100.76.145.60 CPUs=64 RealMemory=538294 Sockets=1 CoresPerSocket=64 ThreadsPerCore=1 Gres=gpu:gh200:1 Feature=gh200
NodeName=lambda-h100 NodeHostname=209-20-157-81 NodeAddr=100.78.101.123 CPUs=26 RealMemory=226486 Sockets=26 CoresPerSocket=1 ThreadsPerCore=1 Gres=gpu:h100:1 Feature=h100

# Partitions
PartitionName=gpu-train Nodes=lambda-2xh100,lambda-h100 Default=NO MaxTime=INFINITE State=UP
PartitionName=gpu-selfplay Nodes=lambda-2xh100,lambda-a10,lambda-h100 Default=YES MaxTime=INFINITE State=UP
PartitionName=cpu-eval Nodes=lambda-2xh100,lambda-a10,lambda-h100 Default=NO MaxTime=INFINITE State=UP
PartitionName=gpu-gh200 Nodes=lambda-gh200-a,lambda-gh200-c,lambda-gh200-d,lambda-gh200-e,lambda-gh200-f,lambda-gh200-g,lambda-gh200-h,lambda-gh200-i,lambda-gh200-k,lambda-gh200-l Default=NO MaxTime=INFINITE State=UP
